{"remainingRequest":"/Users/qianjunhui/WebstormProjects/musicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qianjunhui/WebstormProjects/musicPlayer/src/views/07.mv.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qianjunhui/WebstormProjects/musicPlayer/src/views/07.mv.vue","mtime":1591595830320},{"path":"/Users/qianjunhui/WebstormProjects/musicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qianjunhui/WebstormProjects/musicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qianjunhui/WebstormProjects/musicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qianjunhui/WebstormProjects/musicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnbXYnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyDmgLvmnaHmlbAKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIC8vIOmhteeggQogICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICAvLyDpobXlrrnph48KICAgICAgICAgICAgbGltaXQ6IDEwLAogICAgICAgICAgICBtdlVybDogJycsCiAgICAgICAgICAgIHNpbWlNdnM6IFtdLAogICAgICAgICAgICBtdkRldGFpbDoge30sCiAgICAgICAgICAgIHNpbmdlclBpYzogJycsCiAgICAgICAgICAgIC8vIE1W6K+E6K66CiAgICAgICAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgICAgICAgaG90Q29tbWVudHM6IFtdLAogICAgICAgICAgICBob3RDb3VudDogMAogICAgICAgIH07CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAnJHJvdXRlJyAodG8sIGZyb20pIHsKICAgICAgICAgICAgaWYgKHRvLnF1ZXJ5LmlkICE9IGZyb20ucXVlcnkuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgLy8gTVbor6bmg4XpobUKICAgICAgICBheGlvcyh7CiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXV0dW1uZmlzaC5jbi9tdi91cmwnLAogICAgICAgICAgICBtZXRob2RzOiAnZ2V0JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQKICAgICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5tdlVybCA9IHJlcy5kYXRhLmRhdGEudXJsCiAgICAgICAgfSkKICAgICAgICAvLyDnm7jlhbNNVgogICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hdXR1bW5maXNoLmNuL3NpbWkvbXYnLAogICAgICAgICAgICBtZXRob2RzOiAnZ2V0JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBtdmlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5pZAogICAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLnNpbWlNdnMgPSByZXMuZGF0YS5tdnMKICAgICAgICB9KQogICAgICAgIC8vIE1W5L+h5oGvCiAgICAgICAgYXhpb3MoewogICAgICAgICAgICB1cmw6ICdodHRwczovL2F1dHVtbmZpc2guY24vbXYvZGV0YWlsJywKICAgICAgICAgICAgbWV0aG9kczogJ2dldCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgbXZpZDogdGhpcy4kcm91dGUucXVlcnkuaWQKICAgICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5tdkRldGFpbCA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgLy8g5q2M5omL5L+h5oGvCiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXV0dW1uZmlzaC5jbi9hcnRpc3RzJywKICAgICAgICAgICAgICAgIG1ldGhvZHM6ICdnZXQnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLmRhdGEuYXJ0aXN0SWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zaW5nZXJQaWMgPSByZXMuZGF0YS5hcnRpc3QucGljVXJsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAvLyBNVuivhOiuugogICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hdXR1bW5maXNoLmNuL2NvbW1lbnQvbXYnLAogICAgICAgICAgICBtZXRob2RzOiAnZ2V0JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQsCiAgICAgICAgICAgICAgICBsaW1pdDogNSwKICAgICAgICAgICAgICAgIG9mZnNldDogMAogICAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmhvdENvbW1lbnRzID0gcmVzLmRhdGEuaG90Q29tbWVudHMKICAgICAgICAgICAgdGhpcy5ob3RDb3VudCA9IHJlcy5kYXRhLmhvdENvbW1lbnRzLmxlbmd0aAogICAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gcmVzLmRhdGEuY29tbWVudHMKICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgfSkKICAgIH0sCiAgICBmaWx0ZXJzOiB7CiAgICAgICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodmFsdWUpOwogICAgICAgICAgICBsZXQgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgbGV0IE1NID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICAgICAgICAgICAgTU0gPSBNTSA8IDEwID8gKCcwJyArIE1NKSA6IE1NOwogICAgICAgICAgICBsZXQgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICBkID0gZCA8IDEwID8gKCcwJyArIGQpIDogZDsKICAgICAgICAgICAgbGV0IGggPSBkYXRlLmdldEhvdXJzKCk7CiAgICAgICAgICAgIGggPSBoIDwgMTAgPyAoJzAnICsgaCkgOiBoOwogICAgICAgICAgICBsZXQgbSA9IGRhdGUuZ2V0TWludXRlcygpOwogICAgICAgICAgICBtID0gbSA8IDEwID8gKCcwJyArIG0pIDogbTsKICAgICAgICAgICAgbGV0IHMgPSBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgICAgICAgcyA9IHMgPCAxMCA/ICgnMCcgKyBzKSA6IHM7CiAgICAgICAgICAgIHJldHVybiB5ICsgJy0nICsgTU0gKyAnLScgKyBkICsgJyAnICsgaCArICc6JyArIG0gKyAnOicgKyBzOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5wYWdlID0gdmFsCiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXV0dW1uZmlzaC5jbi9jb21tZW50L212JywKICAgICAgICAgICAgICAgIG1ldGhvZHM6ICdnZXQnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkLAogICAgICAgICAgICAgICAgICAgIGxpbWl0OiA1LAogICAgICAgICAgICAgICAgICAgIG9mZnNldDogKHRoaXMucGFnZS0xKSo1CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSByZXMuZGF0YS5jb21tZW50cwogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDnm7jlhbPmjqjojZDot7PovaxNVgogICAgICAgIHRvTVYoaWQpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9tdj9pZD0ke2lkfWApCiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["07.mv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"07.mv.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"mv-container\">\n        <div class=\"mv-wrap\">\n            <h3 class=\"title\">mv详情</h3>\n            <!-- mv -->\n            <div class=\"video-wrap\">\n                <video\n                        controls\n                        :src=\"mvUrl\"\n                ></video>\n            </div>\n            <!-- mv信息 -->\n            <div class=\"info-wrap\">\n                <div class=\"singer-info\">\n                    <div class=\"avatar-wrap\">\n                        <img :src=\"singerPic\" alt=\"\" />\n                    </div>\n                    <span class=\"name\">{{ mvDetail.artistName }}</span>\n                </div>\n                <div class=\"mv-info\">\n                    <h2 class=\"title\">{{ mvDetail.name }}</h2>\n                    <span class=\"date\">发布：{{ mvDetail.publishTime }}</span>\n                    <span class=\"number\">播放：{{ mvDetail.playCount }}次</span>\n                    <p class=\"desc\">{{ mvDetail.desc }}</p>\n                </div>\n            </div>\n            <!-- 精彩评论 -->\n            <div class=\"comment-wrap\">\n                <p class=\"title\">精彩评论<span class=\"number\">({{ hotCount }})</span></p>\n                <div class=\"comments-wrap\">\n                    <div\n                        class=\"item\"\n                        v-for=\"(item,index) in hotComments\"\n                        :key=\"index\"\n                    >\n                        <div class=\"icon-wrap\">\n                            <img :src=\"item.user.avatarUrl\" alt=\"\" />\n                        </div>\n                        <div class=\"content-wrap\">\n                            <div class=\"content\">\n                                <span class=\"name\">{{ item.user.nickname }}：</span>\n                                <span class=\"comment\">{{ item.content }}</span>\n                            </div>\n                            <div class=\"re-content\" v-if=\"item.beReplied.length!=0\">\n                                <span class=\"name\">{{ item.beReplied[0].user.nickname }}：</span>\n                                <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n                            </div>\n                            <div class=\"date\">{{ item.time | formatDate }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- 最新评论 -->\n            <div class=\"comment-wrap\">\n                <p class=\"title\">最新评论<span class=\"number\">({{ total }})</span></p>\n                <div class=\"comments-wrap\">\n                    <div\n                        class=\"item\"\n                        v-for=\"(item,index) in comments\"\n                        :key=\"index\"\n                    >\n                        <div class=\"icon-wrap\">\n                            <img :src=\"item.user.avatarUrl\" alt=\"\" />\n                        </div>\n                        <div class=\"content-wrap\">\n                            <div class=\"content\">\n                                <span class=\"name\">{{ item.user.nickname }}：</span>\n                                <span class=\"comment\">{{ item.content }}</span>\n                            </div>\n                            <div class=\"re-content\" v-if=\"item.beReplied.length!=0\">\n                                <span class=\"name\">{{ item.beReplied[0].user.nickname }}：</span>\n                                <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n                            </div>\n                            <div class=\"date\">{{ item.time | formatDate }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- 分页器 -->\n            <el-pagination\n                    @current-change=\"handleCurrentChange\"\n                    background\n                    layout=\"prev, pager, next\"\n                    :total=\"total\"\n                    :current-page=\"page\"\n                    :page-size=\"5\"\n                    :limit=\"limit\"\n            >\n            </el-pagination>\n        </div>\n        <!--  相关推荐 -->\n        <div class=\"mv-recommend\">\n            <h3 class=\"title\">相关推荐</h3>\n            <div class=\"mvs\">\n                <div class=\"items\">\n                    <div\n                        class=\"item\"\n                        v-for=\"(item,index) in simiMvs\"\n                        :key=\"index\"\n                    >\n                        <div class=\"img-wrap\">\n                            <img :src=\"item.cover\" alt=\"\" />\n                            <span class=\"iconfont icon-play\" @click=\"toMV(item.id)\"></span>\n                            <div class=\"num-wrap\">\n                                <div class=\"iconfont icon-play\"></div>\n                                <div class=\"num\">{{ item.playCount }}</div>\n                            </div>\n                            <span class=\"time\">{{ item.duration }}</span>\n                        </div>\n                        <div class=\"info-wrap\">\n                            <div class=\"name\">{{ item.name }}</div>\n                            <div class=\"singer\">{{ item.artistName }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\";\n\n    export default {\n        name: 'mv',\n        data() {\n            return {\n                // 总条数\n                total: 0,\n                // 页码\n                page: 1,\n                // 页容量\n                limit: 10,\n                mvUrl: '',\n                simiMvs: [],\n                mvDetail: {},\n                singerPic: '',\n                // MV评论\n                comments: [],\n                hotComments: [],\n                hotCount: 0\n            };\n        },\n        watch: {\n            '$route' (to, from) {\n                if (to.query.id != from.query.id) {\n                    this.$router.go(0)\n                }\n            }\n        },\n        created() {\n            // MV详情页\n            axios({\n                url: 'https://autumnfish.cn/mv/url',\n                methods: 'get',\n                params: {\n                    id: this.$route.query.id\n                }\n            }).then(res => {\n                this.mvUrl = res.data.data.url\n            })\n            // 相关MV\n            axios({\n                url: 'https://autumnfish.cn/simi/mv',\n                methods: 'get',\n                params: {\n                    mvid: this.$route.query.id\n                }\n            }).then(res => {\n                this.simiMvs = res.data.mvs\n            })\n            // MV信息\n            axios({\n                url: 'https://autumnfish.cn/mv/detail',\n                methods: 'get',\n                params: {\n                    mvid: this.$route.query.id\n                }\n            }).then(res => {\n                this.mvDetail = res.data.data\n                // 歌手信息\n                axios({\n                    url: 'https://autumnfish.cn/artists',\n                    methods: 'get',\n                    params: {\n                        id: res.data.data.artistId\n                    }\n                }).then(res => {\n                    this.singerPic = res.data.artist.picUrl\n                })\n            })\n            // MV评论\n            axios({\n                url: 'https://autumnfish.cn/comment/mv',\n                methods: 'get',\n                params: {\n                    id: this.$route.query.id,\n                    limit: 5,\n                    offset: 0\n                }\n            }).then(res => {\n                this.hotComments = res.data.hotComments\n                this.hotCount = res.data.hotComments.length\n                this.comments = res.data.comments\n                this.total = res.data.total\n            })\n        },\n        filters: {\n            formatDate: function (value) {\n                let date = new Date(value);\n                let y = date.getFullYear();\n                let MM = date.getMonth() + 1;\n                MM = MM < 10 ? ('0' + MM) : MM;\n                let d = date.getDate();\n                d = d < 10 ? ('0' + d) : d;\n                let h = date.getHours();\n                h = h < 10 ? ('0' + h) : h;\n                let m = date.getMinutes();\n                m = m < 10 ? ('0' + m) : m;\n                let s = date.getSeconds();\n                s = s < 10 ? ('0' + s) : s;\n                return y + '-' + MM + '-' + d + ' ' + h + ':' + m + ':' + s;\n            }\n        },\n        methods: {\n            handleCurrentChange(val) {\n                this.page = val\n                axios({\n                    url: 'https://autumnfish.cn/comment/mv',\n                    methods: 'get',\n                    params: {\n                        id: this.$route.query.id,\n                        limit: 5,\n                        offset: (this.page-1)*5\n                    }\n                }).then(res => {\n                    this.comments = res.data.comments\n                    this.total = res.data.total\n                })\n            },\n            // 相关推荐跳转MV\n            toMV(id) {\n                this.$router.push(`/mv?id=${id}`)\n            }\n        }\n    };\n</script>\n\n<style></style>\n"]}]}